var DataView=function(a){"use strict";var t=function(){return function(a,t){return moment(t(a)).format("L LT")}};function e(e,n){moment.lang("nl");var r=a("#"+e);var o=parseInt(r.attr("data-page"));n=a.isNumeric(n)?n:1;a("tbody",r).html("");a(".loading",r).removeClass("hidden");var l="__api__/data?page="+(o+n);a.getJSON(l,function(e){var n=a("#template-data-table-body").html();e.prettify=t;var o=Mustache.to_html(n,e);a(".loading",r).addClass("hidden");a("tbody",r).html(o);a(".pager .previous",r).toggleClass("disabled",e.pageinfo.current===1);a(".pager .next",r).toggleClass("disabled",e.pageinfo.current===e.pageinfo.pagecount);r.attr("data-page",e.pageinfo.current)})}function n(t){if(!a("#"+t+" .pager .previous").hasClass("disabled")){e(t,-1)}}function r(t){if(!a("#"+t+" .pager .next").hasClass("disabled")){e(t,1)}}function o(e){Modal.create({id:"dataInfo",title:Locale.str("data","details"),btn_cancel:false,btn_action:Locale.str("system","close"),oncreated:function(n,r){a("#"+n).modal("show");var o="__api__/data/"+e;a.getJSON(o,function(e){var o=a("#template-data-details").html();var l=[];for(var i in e.values){var s=e.values[i];var d=false;if(typeof s==="object"){s=JSON.stringify(s);d=true}else{s=s.toString();d=s.length>100}l.push({key:i,value:s,large:d})}e.values=l;e.prettify=t;var u=Mustache.to_html(o,e);a(".modal-body","#"+n).html(u);r()});return true}})}return{load:e,previous:n,next:r,showInfo:o}}(jQuery);